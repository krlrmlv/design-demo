# :building_construction: Архитектура :building_construction:

#### :memo: Оглавление: :memo:

1. [Общее](#общее)
2. [Структура](#структура-проекта)
3. [Полезные ссылки](#полезные-ссылки)

## Общее

- Архитектура приложения спроектирована по принципу [FSD-архитектуры](https://feature-sliced.design/ru/) с
  использованием app-роутинга NextJS 14+ версии.

<sup>[[оглавление]](#оглавление)</sup>

## Структура проекта

Директории:

- Уровень роутинга: `src/app` - app-роутинг NextJS;
- Уровень фич: `src/features` - пользователские сценарии, бизнес-логика (например, авторизация, изменение пароля,
  добавление в корзину/избранное, отправка отзыва и т.п.);
- Уровень бизнес-объектов: `src/entities` - сущности с бизнес-логикой из features (например, карточка продукта);
- Уровень виджетов: `src/widgets` - комбинация с бизнес-логикой из features + сущностями из entities (например, листинг
  продуктов(карточек), отзывы);
- Уровень страниц: `src/root-pages` - композиционный уровень, собираемый из объектов, фич и виджетов. Рутовая
  client-side страница для app-роутинга;
- Уровень приложения: `src/shared` - настройки приложения, стили, провайдеры, утилиты, хуки. Всё, что может
  использоваться на всех уровнях приложения.

## Основные принципы
- Проект разделен по слоям
- Нельзя импортировать вышестоящий слой в нижестоящий
- Запрет кросс-импортов. Нельзя импортировать слайсы на одном уровне, кроме shared и entities
- Нет вертикальных зависимостей - реализуем горизонтальные связи через инверсию зависимостей - Dependency inversion
- Поток управления не совпадает с потоком зависимостей
- Структурная типизация

## Shared слой

- Инфраструктурный слой в котором находится UIKit, настройки библиотек, модули для реализации функциональности (toast)
- Не содержит бизнес логики
- Стабильные модули, редко изменяются

## Entities слой

- Абстрактный бизнес слой
- Содержит базовые переиспользуемые паттерны (карточка товара)

## Feature слой

- Фичи - это название бизнес сущностей
- Совершают действия над приложением
- Как пример - формы, модалки, кнопки с логигой
- Можно хранить локальные состояния редактирования
- Можно noDry.
- Что-то общее из фич можно вынести в Shared или Entities (одинаковые куски верстки)
- Для больших проектов группируем по смыслу - auth, user, cart (как пример у корзины есть добавление, удаление и изменение количества)

## Widgets, Pages слои

- Несут одинаковый смысл
- Если можно без виджета - лучше без него
- Определяют форму интерфейса
- Содержит много логики отображения
- Нет бизнес логики
- Самей большие компоненты по количеству кода

## Рекомендации

- Внутри сущностей и фич разделяем типы, ui и api по дирректориям

<sup>[[оглавление]](#оглавление)</sup>

## Полезные ссылки

1. https://feature-sliced.design/ru/docs/get-started/overview
2. https://habr.com/ru/companies/inDrive/articles/693768/
3. https://habr.com/ru/companies/piter/articles/744824/
4. https://maze-shrimp-ac0.notion.site/FSD-da34dfbe2d0a4f8fb5ad8505911073c4
